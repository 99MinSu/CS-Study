# TCP&UDP

- TCP와 UDP는 OSI 7 계층들 중 TCP/IP의 **전송 계층**에서 사용되는 프로토콜이다.
    - **전송 계층**은 송신자와 수신자를 연결하는 통신서비스를 제공하는 계층이다.
- 즉, 데이터의 전달을 담당하며 전달되는 패킷의 오류를 검사하고 재전송 요구 등의 제어를 담당한다.

## TCP(Transmission Control Protocol)

- **연결 지향적 프로토콜**이다.
    - 연결 지향적 프로토콜은  클라이언트와 서버가 연결된 상태에서 데이터를 주고받는 프로토콜을 의미한다.
- 장치들 사이에 논리적인 접속을 성립하기 위해 연결을 설정해 신뢰성을 보장하는 연결형 서비스이다.
- TCP는 네트워크에 연결된 컴퓨터에서 실행되는 프로그램 간에 일련의 옥텟(데이터, 메시지, 세그먼트라는 블록 단위)을 **안정적으로**, **순서대로**, **에러 없이** 교환할 수 있게 한다.
- 일반적으로 TCP와 IP는 함께 사용되며 **IP는 배달을, TCP는 `패킷`의 추적 및 관리**를 하게 됩니다.

## TCP 특징

1. **연결형 서비스로 가상 회선 방식을 제공**
    - 3-way handshaking 과정을 통해 연결을 설정하고
    - 4-way handshaking 과정을 통해 연결을 해제한다.
2. **흐름 제어(Flow control)**
    - 데이터 처리 속도를 조절하여 수신자의 버퍼 오버플로우를 방지
3. **혼잡 제어(Congestion control)**
    - 네트워크 내의 패킷 수가 과도하게 증가하지 않도록 방지
4. **높은 신뢰성을 보장**
    - 신뢰성이 높은 전송을 하기 때문에 UDP보다 속도가 느림
5. **전이중(Full-Duplex), 점대점(Point to Point) 방식**
    - 전이중(Full-Duplex) : 전송이 양방향으로 동시에 일어날 수 있다.
    점대점(Point to Point) : 각 연결이 정확히 2개의 종단점을 가지고 있다.
    
- (1). 가상 회선 방식을 제공한다는 것은 발신지와 수신지를 연결하여 패킷을 전송하기 위한 논리적 경로를 배정한다는 말이다.
- 3-way handshaking 과정은 발신지와 수신지 사이에 논리적인 접속(세션)을 성립하는 과정을 의미한다.
- TCP가 위와 같은 특징을 지니는 이유는 간단하다. TCP는 연결형 서비스로, 신뢰성을 보장하기 때문이다.
- 그래서 3-way handshaking의 과정도 사용하는 것이고, (2). 데이터의 흐름 제어나 (3). 혼잡 제어와 같은 기능도 하는 것이다.
- (4). 하지만 이러한 기능 때문에 UDP보다 속도가 느리게 된다.
그렇기에 TCP는 연속성보다 신뢰성 있는 전송이 중요할 때 사용하는 프로토콜로 예를 들면, 파일 전송과 같은 경우에 사용된다.

![image](https://github.com/user-attachments/assets/c21e5494-dfb1-4813-8bb3-17262b8ee953)


## UDP(User Datagram Protocol)

- UDP는 **비연결형 프로토콜**이다.
    - 연결을 위해 할당되는 논리적인 경로가 없고, 각각의 패킷은 다른 경로로 전송되며, 독립적인 관계를 지닌다.

## UDP의 특징

1. **비연결형 서비스로 데이터그램 방식을 제공한다.**
    - 데이터의 전송 순서가 바뀔 수 있다.
2. **데이터 수신 여부를 확인하지 않는다.**
    - TCP의 3-way handshaking과 같은 과정 X
3. **신뢰성이 낮다.**
    - 흐름 제어(flow control)가 없어서 제대로 전송되었는지, 오류가 없는지 확인할 수 없다.
4. **TCP보다 속도가 빠르다.**
5. **1:1 & 1:N & N:N 통신이 가능하다.**

- (1). UDP는 비연결형 서비스이기 때문에, (2). 연결을 설정하고 해제하는 과정이 존재하지 않는다.
- 서로 다른 경로로 독립적으로 처리하며,  (3). 흐름 제어 또는 혼잡 제어와 같은 기능을 처리하지 않기에 (4). TCP보다 속도가 빠르며 네트워크 부하가 적다는 장점이 있지만, 신뢰성 있는 데이터 전송을 보장하지 못한다.
- **UDP는 신뢰성보다는 연속성 있는 전송이 필요할 때 사용하는 프로토콜**로 예를 들면, 실시간 서비스(streaming)에 자주 사용된다.

![image](https://github.com/user-attachments/assets/a1d884eb-06f5-4f5d-8897-f346f1e1a909)


## TCP vs UDP

그림으로 비교하는 TCP vs UDP

![img1 daumcdn](https://github.com/user-attachments/assets/85cda583-3d76-444e-9bed-ae56a87836b1)
![image](https://github.com/user-attachments/assets/a1a05bf6-1469-4d98-a0d4-3354650ea347)


각 프로토콜의 특징을 표로 비교해보면 다음과 같다.

![image](https://github.com/user-attachments/assets/4c46d39e-f9c3-4983-ba84-16f22e5df8fd)


## 요약

- TCP는 연속성보다 신뢰성 있는 전송이 중요할 때 사용되는 프로토콜이며,
UDP는 TCP보다 빠르고 네트워크 부하가 적다는 장점이 있지만, 신뢰성 있는 데이터 전송을 보장하지는 않는다.
- 그렇기 때문에 신뢰성보다는 연속성이 중요한 실시간 스트리밍과 같은 서비스에 자주 사용된다.

### Reference

https://dev-coco.tistory.com/144

[https://velog.io/@averycode/네트워크-TCPUDP와-3-Way-Handshake4-Way-Handshake](https://velog.io/@averycode/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-TCPUDP%EC%99%80-3-Way-Handshake4-Way-Handshake)
